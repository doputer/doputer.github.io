---
emoji: 'ğŸ¯'
title: 'ê²€ìƒ‰ì–´ ê°•ì¡° ì•Œê³ ë¦¬ì¦˜ ê°œë°œê¸°'
description: 'ì´ê±¸ ê²€ìƒ‰í•œê²Œ ë§ìœ¼ì‹œì£ '
tags:
  - article
  - algorithm
  - search
date: 2022-12-19
---

## ê¸°ì¡´ Knoticleì˜ ê²€ìƒ‰ ê²°ê³¼

ì„œë¹„ìŠ¤ì—ì„œ "í˜ì´ì§€" ë¼ëŠ” í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í–ˆì„ ë•Œ ê¸°ì¡´ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê²€ìƒ‰ëœë‹¤.

![](0.png)

ì œëª©ê³¼ ë‚´ìš©ì— "í˜ì´ì§€" ë¼ëŠ” ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ê¸€ë“¤ì´ ë‚˜íƒ€ë‚˜ê³  ìˆë‹¤ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ê·¸ëŸ°ë° ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ì›í•˜ëŠ” ê²€ìƒ‰ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚¬ëŠ”ì§€ ì•Œê¸° í˜ë“¤ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ì‚¬ìš©ìê°€ ê²€ìƒ‰í•œ ê²€ìƒ‰ì–´ê°€ ê¸€ì˜ ì–´ë–¤ ë§¥ë½ì— ë“¤ì–´ìˆëŠ”ì§€ ì•Œê²Œ í•´ì¤€ë‹¤ë©´, ì›í•˜ëŠ” ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ ì„ íƒí•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

![](1.png)

ìœ„ì™€ ê°™ì´ ê²€ìƒ‰ ê²°ê³¼ì— ê²€ìƒ‰ì–´ê°€ ê°•ì¡°ë˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ê³¼ì •ì„ ì†Œê°œí•˜ë ¤ê³  í•œë‹¤.

## ê²€ìƒ‰ì–´ ê°•ì¡°í•˜ê¸°

Knoticleì˜ ê¸€(article)ì˜ ë‚´ìš©(content)ì€ ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì €ì¥ë˜ì–´ìˆë‹¤.

> êµ­í† ì™€ ìì›ì€ êµ­ê°€ì˜ ë³´í˜¸ë¥¼ ë°›ìœ¼ë©°, êµ­ê°€ëŠ” ê·¸ ê· í˜•ìˆëŠ” ê°œë°œê³¼ ì´ìš©ì„ ìœ„í•˜ì—¬ í•„ìš”í•œ ê³„íšì„ ìˆ˜ë¦½í•œë‹¤. ëª¨ë“  êµ­ë¯¼ì€ í†µì‹ ì˜ ë¹„ë°€ì„ ì¹¨í•´ë°›ì§€ ì•„ë‹ˆí•œë‹¤. ê°ì‚¬ì›ì€ ì„¸ì…Â·ì„¸ì¶œì˜ ê²°ì‚°ì„ ë§¤ë…„ ê²€ì‚¬í•˜ì—¬ ëŒ€í†µë ¹ê³¼ ì°¨ë…„ë„êµ­íšŒì— ê·¸ ê²°ê³¼ë¥¼ ë³´ê³ í•˜ì—¬ì•¼ í•œë‹¤. ëŒ€í•œë¯¼êµ­ì€ ë¯¼ì£¼ê³µí™”êµ­ì´ë‹¤. êµ­ê°€ëŠ” ì¬í•´ë¥¼ ì˜ˆë°©í•˜ê³  ê·¸ ìœ„í—˜ìœ¼ë¡œë¶€í„° êµ­ë¯¼ì„ ë³´í˜¸í•˜ê¸° ìœ„í•˜ì—¬ ë…¸ë ¥í•˜ì—¬ì•¼ í•œë‹¤.

ì´ë•Œ "êµ­ë¯¼" ê³¼ "ì˜ˆë°©" ì´ë¼ëŠ” ê²€ìƒ‰ì–´ë¡œ ê²€ìƒ‰í•œ ê²½ìš°ì— ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ë‹¹ ë‹¨ì–´ë¥¼ ê°•ì¡°í•´ì¤„ ìˆ˜ ìˆì„ê¹Œ?

ìš°ì„  ë¬¸ìì—´ì„ ì•ì—ì„œ ë¶€í„° ì½ìœ¼ë©´ì„œ "êµ­ë¯¼" ê³¼ "ì˜ˆë°©" ì¤‘ì— ë¨¼ì € ë“±ì¥í•˜ëŠ” ë‹¨ì–´ë¥¼ ì°¾ì•„ì•¼í•œë‹¤.

> ...
>
> ëª¨ë“  **êµ­ë¯¼**ì€ í†µì‹ ì˜ ë¹„ë°€ì„ ì¹¨í•´ë°›ì§€ ì•„ë‹ˆí•œë‹¤.
>
> ...

ì½”ë“œë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```ts
const getFirstKeyword = (text: string, keywords: string[]) => {
  const keywordMap = new Map<number, string>();

  keywords.forEach((keyword) => {
    const index = text.toLowerCase().indexOf(keyword.toLowerCase());

    if (index !== -1) keywordMap.set(index, text.slice(index, index + keyword.length));
  });

  if (keywordMap.size === 0) return { keyword: '', index: -1, validKeywords: [] };

  const firstKeywordIndex = Math.min(...Array.from(keywordMap.keys()));
  const firstKeyword = keywordMap.get(firstKeywordIndex);

  return {
    keyword: firstKeyword || '',
    index: firstKeywordIndex,
    validKeywords: Array.from(new Set(keywordMap.values())),
  };
};
```

ê²€ìƒ‰ì–´ë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ ë‚´ìš©ì—ì„œ ê°€ì¥ ë¨¼ì € ë“±ì¥í•˜ëŠ” ì¸ë±ìŠ¤ë¥¼ êµ¬í•œë‹¤. ê·¸ í›„ì— ê°€ì¥ ë‚®ì€ ì¸ë±ìŠ¤ë¥¼ ê°€ì§„ ë‹¨ì–´(= ê°€ì¥ ì•ì— ë“±ì¥í•˜ëŠ” ë‹¨ì–´)ë¥¼ ì°¾ëŠ”ë‹¤.

ì´ë•Œ ì˜ì–´ ê²€ìƒ‰ì˜ ê²½ìš° ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´ ì°¾ê¸° ìœ„í•´ì„œ `.toLowerCase()`ë¥¼ ì´ìš©í•œë‹¤. ë˜í•œ í•œë²ˆ ì°¾ì§€ ëª»í•œ ê²€ìƒ‰ì–´ëŠ” ê°™ì€ ë¬¸ì¥ì—ì„œ ë‹¤ì‹œ ë“±ì¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ë¥¼ í•„í„°ë§í•´ì£¼ê¸° ìœ„í•´ `validKeywords`ì— ìœ íš¨í•œ ê²€ìƒ‰ì–´ë§Œ í•„í„°ë§í•´ì„œ ê°™ì´ ë°˜í™˜í•´ì¤€ë‹¤.

ê°€ì¥ ë¨¼ì € ë“±ì¥í•˜ëŠ” ë‹¨ì–´ë¥¼ ì°¾ì•˜ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬¸ì¥ì„ ì„¸ ë“±ë¶„(ë‹¨ì–´ ì• ë¬¸ì¥, ë‹¨ì–´, ë‹¨ì–´ ë’· ë¬¸ì¥)ìœ¼ë¡œ ë‚˜ëˆˆ í›„ ì‚¬ì´ì— `<b> íƒœê·¸`ë¥¼ ë„£ì–´ì„œ ê°•ì¡°í•´ì¤„ ìˆ˜ ìˆë‹¤.

> ...
>
> ëª¨ë“  \<b\>êµ­ë¯¼\</b\> ì€ í†µì‹ ì˜ ë¹„ë°€ì„ ì¹¨í•´ë°›ì§€ ì•„ë‹ˆí•œë‹¤.
>
> ...

ë‹¨ì–´ í•˜ë‚˜ë¥¼ ê°•ì¡°í–ˆë‹¤ë©´ ë‹¨ì–´ ë’· ë¬¸ì¥ì€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ê°•ì¡°ì²˜ë¦¬ë¥¼ í•´ì£¼ë©´ ëœë‹¤.

1. ê°€ì¥ ë¨¼ì € ë“±ì¥í•˜ëŠ” ê²€ìƒ‰ì–´ ì°¾ê¸°
2. ê²€ìƒ‰ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰ì–´ ì• ë¬¸ì¥, ê²€ìƒ‰ì–´, ê²€ìƒ‰ì–´ ë’· ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ê¸°
3. ë‚˜ëˆ ì§„ ë¬¸ì¥ ì‚¬ì´ì— \<b\> íƒœê·¸ ì¶”ê°€í•˜ê¸°
4. ê²€ìƒ‰ì–´ ë’· ë¬¸ì¥ì—ì„œ ê°€ì¥ ë¨¼ì € ë“±ì¥í•˜ëŠ” ê²€ìƒ‰ì–´ ì°¾ê¸°
5. ë°˜ë³µ

ì½”ë“œë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```ts
export const highlightKeyword = (text: string, keywords: string[]): React.ReactNode => {
  const { keyword, index, validKeywords } = getFirstKeyword(text, keywords);

  if (index === -1) return text;

  const endIndex = index + keyword.length;

  return (
    <>
      {text.slice(0, index)}
      <b>{keyword}</b>
      {highlightKeyword(text.slice(endIndex), validKeywords)}
    </>
  );
};
```

## ê°•ì¡°í•œ ê²€ìƒ‰ì–´ê°€ ë³´ì´ì§€ ì•ŠëŠ” ë¬¸ì œ

ê²€ìƒ‰ì–´ë¥¼ ê°•ì¡°í•  ìˆ˜ ìˆëŠ” ë¡œì§ì€ ì‘ì„±í–ˆëŠ”ë° ì¼ë¶€ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ë¬¸ì œê°€ ìˆì—ˆë‹¤.

ê²€ìƒ‰ ê²°ê³¼ì˜ ì œí•œëœ ë·°í¬íŠ¸ë¡œ ì¸í•´ ê°•ì¡°í•œ ê²€ìƒ‰ì–´ê°€ ë¬¸ì¥ ë’· ë¶€ë¶„ì— ë“±ì¥í•˜ëŠ” ê²½ìš° ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ë³´ì´ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.

![](2.png)

ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì¥ì´ ë³´ì´ê²Œ í•´ì¤€ë‹¤ë©´ ì‚¬ìš©ìëŠ” ìì‹ ì˜ ê²€ìƒ‰ì–´ê°€ ê¸€ì˜ ì–´ë–¤ ë§¥ë½ì—ì„œ ë“±ì¥í•˜ëŠ”ì§€ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœì´ˆ ê²€ìƒ‰ì–´ì˜ ì• ë¶€ë¶„ì„ ì œê±°í•´ì£¼ë©´ ëœë‹¤.

> ~~êµ­í† ì™€ ìì›ì€ êµ­ê°€ì˜ ë³´í˜¸ë¥¼ ë°›ìœ¼ë©°, êµ­ê°€ëŠ” ê·¸ ê· í˜•ìˆëŠ” ê°œë°œê³¼ ì´ìš©ì„ ìœ„í•˜ì—¬ í•„ìš”í•œ ê³„íšì„ ìˆ˜ë¦½í•œë‹¤.~~
>
> ~~ëª¨ë“ ~~ **êµ­ë¯¼**ì€ í†µì‹ ì˜ ë¹„ë°€ì„ ì¹¨í•´ë°›ì§€ ì•„ë‹ˆí•œë‹¤.
>
> ...

ë‹¤ë§Œ ìœ„ì™€ ê°™ì´ ê²€ìƒ‰ì–´ ë°”ë¡œ ì•ìª½ë¶€í„° ì§€ìš°ê²Œ ë˜ë©´ ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì¥ë„ ì§€ì›Œì§€ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ ë§¥ë½ì„ íŒŒì•…í•˜ê¸° í˜ë“¤ì–´ì§„ë‹¤.

ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì¥ì€ ì‚´ë¦¬ë˜ ê·¸ ì•ìª½ì€ ëª¨ë‘ ì§€ìš°ê¸° ìœ„í•´ì„  ì¤„ë°”ê¿ˆ ë¬¸ìë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤. ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì¥ê³¼ ê°€ì¥ ê°€ê¹Œì´ ìˆëŠ” ì¤„ë°”ê¿ˆ ë¬¸ìë¥¼ ì°¾ì•„ì„œ ê·¸ ì•ìª½ì„ ì§€ìš°ë©´ ì•ì„œ ë§í•œ ë¬¸ì œë“¤ì„ í•´ê²°í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

> ~~êµ­í† ì™€ ìì›ì€ êµ­ê°€ì˜ ë³´í˜¸ë¥¼ ë°›ìœ¼ë©°, êµ­ê°€ëŠ” ê·¸ ê· í˜•ìˆëŠ” ê°œë°œê³¼ ì´ìš©ì„ ìœ„í•˜ì—¬ í•„ìš”í•œ ê³„íšì„ ìˆ˜ë¦½í•œë‹¤.~~**\n**
>
> ëª¨ë“  **êµ­ë¯¼**ì€ í†µì‹ ì˜ ë¹„ë°€ì„ ì¹¨í•´ë°›ì§€ ì•„ë‹ˆí•œë‹¤.
>
> ...

ì½”ë“œë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ ë·°í¬íŠ¸ì—ëŠ” ìµœëŒ€ 400ì ì •ë„ê°€ ë“¤ì–´ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë’· ë¶€ë¶„ë„ í•¨ê»˜ ì œê±°í•´ì¤¬ë‹¤.

```ts
export const getTextAfterLastNewLine = (text: string, keywords: string[]) => {
  const { index } = getFirstKeyword(text, keywords);

  const newLineIndex = text.slice(0, index).lastIndexOf('\n');

  return newLineIndex === -1 ? text.slice(0, 400) : text.slice(newLineIndex, newLineIndex + 400);
};
```
