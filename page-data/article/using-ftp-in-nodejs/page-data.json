{"componentChunkName":"component---src-templates-blog-post-js","path":"/article/using-ftp-in-nodejs/","result":{"data":{"site":{"siteMetadata":{"title":"DOPUTER","author":"κΉ€λ„ν„","siteUrl":"https://dohyeon.dev","comment":{"disqusShortName":"","utterances":"doputer/blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"82530db4-0efc-5c7e-9228-c854dfbd190a","excerpt":"ν”„λ΅μ νΈλ¥Ό ν•λ‹¤κ°€ FTPλ¥Ό μ‚¬μ©ν•΄μ„ λ‚΄κ°€ κ°€μ§„ κ²μ΄νΈμ›¨μ΄μ— νμΌμ„ λ³΄λ‚Ό μΌμ΄ μƒκ²Όλ‹¤. FTPμ κ°λ…λ¶€ν„° ν΄λΌμ΄μ–ΈνΈ(NestJS)μ™€ μ„λ²„(ESL Gateway)λ¥Ό μ—°κ²°ν•λ©΄μ„ λ‚΄κ°€ μ‘μ—…ν• κ³Όμ •μ„ μ •λ¦¬ν•΄λ³΄λ ¤κ³  ν•λ‹¤. FTP κ΄€λ ¨ ν”„λ΅ν† μ½λ΅ FTPS, SFTPκ°€ μμ§€λ§ μ—¬κΈ°μ„λ”  μ— κ΄€ν•΄μ„λ§ λ‹¤λ£¨λ ¤κ³  ν•λ‹¤. FTP λ€? νμΌ μ „μ†΅ ν”„λ΅ν† μ½(File Transfer Protocol, FTP)μ€ TCP/IPβ€¦","html":"<p>ν”„λ΅μ νΈλ¥Ό ν•λ‹¤κ°€ FTPλ¥Ό μ‚¬μ©ν•΄μ„ λ‚΄κ°€ κ°€μ§„ κ²μ΄νΈμ›¨μ΄μ— νμΌμ„ λ³΄λ‚Ό μΌμ΄ μƒκ²Όλ‹¤. FTPμ κ°λ…λ¶€ν„° ν΄λΌμ΄μ–ΈνΈ(NestJS)μ™€ μ„λ²„(ESL Gateway)λ¥Ό μ—°κ²°ν•λ©΄μ„ λ‚΄κ°€ μ‘μ—…ν• κ³Όμ •μ„ μ •λ¦¬ν•΄λ³΄λ ¤κ³  ν•λ‹¤.</p>\n<p>FTP κ΄€λ ¨ ν”„λ΅ν† μ½λ΅ FTPS, SFTPκ°€ μμ§€λ§ μ—¬κΈ°μ„λ” <code class=\"language-text\">FTP</code> μ— κ΄€ν•΄μ„λ§ λ‹¤λ£¨λ ¤κ³  ν•λ‹¤.</p>\n<h2 id=\"ftp-λ€\" style=\"position:relative;\"><a href=\"#ftp-%EB%9E%80\" aria-label=\"ftp λ€ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP λ€?</h2>\n<blockquote>\n<p>νμΌ μ „μ†΅ ν”„λ΅ν† μ½(File Transfer Protocol, FTP)μ€ TCP/IP ν”„λ΅ν† μ½μ„ κ°€μ§€κ³  μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ νμΌ μ „μ†΅μ„ ν•κΈ° μ„ν• ν”„λ΅ν† μ½μ΄λ‹¤.</p>\n</blockquote>\n<p>μμ „μ—λ” λ§μ΄ μ‚¬μ©ν• ν”„λ΅ν† μ½μ΄μ§€λ§, μ§€κΈμ€ λ³΄μ•μƒμ μ„ν—μΌλ΅ λ§μ΄ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤. FTPSλ‚ SFTPλ΅ λ€μ²΄λ κ²ƒ κ°™λ‹¤.</p>\n<p>FTPλ” λ‘ κ°€μ§€ λ¨λ“λ΅ λ™μ‘ν•λ”λ° <code class=\"language-text\">Active Modeμ™€ Passive Mode</code> μ΄λ‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQ4y32Uh44rMQhF/f8fFaVKaVJ6b0rvvVd2DyuPnEneQ7I8ZjBwLxgjv7Lb7aTX60m329W1WCzk+XyKldfr9fG9Wq2k3+9799brteoNBtvtVpbLpcxmM12cH4+H58BdCME2m406xX46neqZO2Y4HKoCsU6IVq1W5Xg8yjexQa1zBNv5fC6mUqlo2u7Pw+Eg0WhUzueznk+nk4zHY80IaTQa3rfNGoelUkkMmUwmk7efOM5ms3K9XmU0GkkoFJJEIqE6HEUikQ+Hl8tF0um0mFarpUVw+UKCwaCSDTyyw4YsCFYulz3I1v52u0mxWBTTbDYV+7cM7dmtMsIdiuD+A02hUPjukD2VSmlbDAYDyWQyegY+mQDtvw5pGRcy1eYnvHAmYwpFN2ALHf90SMWoMpfv97sHCz7Q2VZypdPpeI1sO+PNIYuIZEDFgRYIBCSXy+mitdgpRrvdlng8/tGjOPaKYlsAJRnBUz6f132/32ulCQQSeCUYSaAnODsPBJ7VIQp/lYnmUuBKvV73INs7BKRX36rsDgTguYQzQCzMWq2mvckLAgF6AkCLOrSNjfDc4JNodgBANmdgYsuzpDB2qOAM/uldfXrJZFIN4YMdIxyQOcZ+6ECmjfxFAZWhaamcO22AGovFPuagpYQE7Pu3OqCHw+G/8eV/6DiGCjeAu/PG4dQ/HJgLPxSxVva4NpahAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ftp\"\n        title=\"ftp\"\n        src=\"/static/bafd0daff81ffc0ce067f110656a0656/c1b63/1.png\"\n        srcset=\"/static/bafd0daff81ffc0ce067f110656a0656/5a46d/1.png 300w,\n/static/bafd0daff81ffc0ce067f110656a0656/0a47e/1.png 600w,\n/static/bafd0daff81ffc0ce067f110656a0656/c1b63/1.png 1200w,\n/static/bafd0daff81ffc0ce067f110656a0656/b4904/1.png 1768w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>μ°μ„ , Active Modeμ λ™μ‘μ„ λ‚νƒ€λ‚Έ κ·Έλ¦ΌμΈλ° λ‹¤μκ³Ό κ°™μ€ μμ„λ΅ λ™μ‘ν•λ‹¤.</p>\n<ol>\n<li>ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ 21λ² ν¬νΈλ΅ μ ‘μ†ν• ν›„, ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•  ν¬νΈλ¥Ό μ•λ ¤μ¤€λ‹¤.</li>\n<li>μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ— μ‘λ‹µν•λ‹¤.</li>\n<li>μ„λ²„μ 20λ² ν¬νΈκ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ•λ ¤μ¤€ ν¬νΈλ΅ μ ‘μ†ν•λ‹¤.</li>\n<li>ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ μ”μ²­μ— μ‘λ‹µν•λ‹¤.</li>\n</ol>\n<p>κ·Έλ¦Όμ—μ„ λ³Ό μ μλ“―μ΄ <code class=\"language-text\">μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ— μ ‘μ†</code> ν•λ” κµ¬μ΅°μ΄λ‹¤.</p>\n<p>ν΄λΌμ΄μ–ΈνΈμ—μ„ λ°©ν™”λ²½ λ“±μΌλ΅ μ™Έλ¶€ μ ‘μ†μ΄ λ¶κ°€λ¥ν• μƒν™©μ΄λΌλ©΄ μ ‘μ†μ΄ λ¶κ°€λ¥ν•κ³ , μ ‘μ†μ΄ λλ”λΌλ„ μ •μƒμ μΈ λ°μ΄ν„° λ©λ΅μ„ λ¶λ¬μ¤μ§€ λ» ν•  μλ„ μλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” λ°©ν™”λ²½ μΈλ°”μ΄λ“ ν—μ©, μ„λ²„λ” λ°©ν™”λ²½ μ•„μ›ƒλ°”μ΄λ“ ν—μ©μ„ ν†µν•΄μ„ ν•΄κ²°ν•΄μ•Ό ν•λ‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACFUlEQVQ4y5WUV6vjQAyF/f//UJ5COiE9pHfSe+9du59AxrvJw70C45mxdHR0pLEjf22/30u/35der6fPcrmU1+slZu/3+2O9Xq9lMBi4cZvNRs8dHHa7naxWK1ksFjKfz3X/fD5dAO+DkWy73Soo/rPZTPfEOKPRSA+w6/WqQWSr1WpyOp3km1lSA8fwhZBTrVaVNjYejxWUj9FoVNfY8XjUpFZWs9lUdl4JiCmXy+LAZDKZ6GE+n9dgW5/PZ90nk0kJhUKqGfpGIpEPQJKn02lx2u22loBxcDgcdB0IBJQ5DQMEjQmixEql4pZsgPf7XUqlkjitVssF5MB0g+HtdlOG0+lU0Ppyueg3YmiCFxDfYrH4L2ChUHABYVuv1yWRSEgqldJ9NptVnXn/GpCPOFknYQdTykdPa5B1mZH5CmhNoXzvcHut0Wi4Whs7moRMHxraqLCmLDoLQC6X07GgIT6fT6yZTAiseSOFAtpgo1On09G93+8XZhQwdKNcAGAGMF3HHo+HW7rbZQNEfIKNofcOe41m/agpaAB9G2a70zQARjY23BTm02suIB+NIToNh0MVOBaLuRqhWyaT0fJJhlb4MRE2CQy2AqIZrDACzYHg/0tmz3UEnFtEBZAhMTLE43FxKBNQLBgMqhMCM2tk9f7CbIwA5M/i1RAJwuGwOFC3jqEnOuHEWHz7J2LdbtfV0NsUYv4Am2BOILMLXDIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ftp\"\n        title=\"ftp\"\n        src=\"/static/2971d38d3d178b0cd23f57abbc193d63/c1b63/2.png\"\n        srcset=\"/static/2971d38d3d178b0cd23f57abbc193d63/5a46d/2.png 300w,\n/static/2971d38d3d178b0cd23f57abbc193d63/0a47e/2.png 600w,\n/static/2971d38d3d178b0cd23f57abbc193d63/c1b63/2.png 1200w,\n/static/2971d38d3d178b0cd23f57abbc193d63/a2498/2.png 1764w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>λ‹¤μμ€ Passive Modeμ λ™μ‘μ„ λ‚νƒ€λ‚Έ κ·Έλ¦ΌμΈλ° λ‹¤μκ³Ό κ°™μ€ μμ„λ΅ λ™μ‘ν•λ‹¤.</p>\n<ol>\n<li>ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ 21λ² ν¬νΈλ΅ Passive μ ‘μ†μ„ μ‹λ„ν•λ‹¤.</li>\n<li>μ„λ²„μ—μ„ μ‚¬μ©ν•  ν¬νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ•λ ¤μ¤€λ‹¤.</li>\n<li>ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—μ„ μ•λ ¤μ¤€ ν¬νΈλ΅ μ ‘μ†μ„ μ‹λ„ν•λ‹¤.</li>\n<li>μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ— μ‘λ‹µν•λ‹¤.</li>\n</ol>\n<p>μ„μ—μ„ μ–ΈκΈ‰ν• Active Modeμ™€λ” λ°λ€λ΅ <code class=\"language-text\">ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„μ— μ ‘μ†</code> ν•λ” κµ¬μ΅°μ΄λ‹¤.</p>\n<p>μ„λ²„μ λ°μ΄ν„° ν¬νΈκ°€ λ§‰ν€ μλ” κ²½μ° μ—°κ²°μ΄ λ¶κ°€λ¥ν•λ‹¤. λ°μ΄ν„° ν¬νΈμ λ²”μ„λ” λ³„λ„λ΅ μ§€μ •ν•μ§€ μ•λ” κ²½μ° 1024 ~ 65535λ² ν¬νΈλ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έμ— λ°©ν™”λ²½ μΈλ°”μ΄λ“λ¥Ό λ¨λ‘ μ—΄μ–΄λ†”μ•Ό ν•λ”λ°, λ°μ΄ν„° ν¬νΈμ λ²”μ„λ¥Ό μ§€μ •ν•΄λ†“μΌλ©΄ μ΄λ¬ν• λ¬Έμ λ¥Ό μ–΄λ μ •λ„ ν•΄κ²°ν•  μ μλ‹¤κ³  ν•λ‹¤.</p>\n<h2 id=\"ftp-client-nestjs\" style=\"position:relative;\"><a href=\"#ftp-client-nestjs\" aria-label=\"ftp client nestjs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP Client (NestJS)</h2>\n<p>ν”„λ΅μ νΈμ—μ„ μ„λ²„ μ¤νƒμ€ <code class=\"language-text\">NestJS</code> λ¥Ό μ‚¬μ©ν–λ”λ° μΌμ • μ‹κ°„ λ§λ‹¤ ESL Gatewayμ— csv νμΌμ„ FTP ν†µμ‹ μ„ ν†µν•΄μ„ λ³΄λ‚΄μ•Όν–λ‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// task.module.ts</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FtpModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'nestjs-ftp'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    FtpModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRootFtpAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      inject<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>ConfigService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useFactory</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>configService<span class=\"token operator\">:</span> ConfigService<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          host<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FTP_HOST'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          port<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">getNumber</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FTP_PORT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          user<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FTP_USER'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          password<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FTP_PASSWORD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          secure<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FTP_SECURE'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>λ‚΄κ°€ μ΄μ©ν• ν¨ν‚¤μ§€λ” <code class=\"language-text\">nestjs-ftp</code> μ΄λ‹¤.</p>\n<p>μ½”λ“ μƒμ—μ„λ” <code class=\"language-text\">.env</code> ν™κ²½ λ³€μμ—μ„ μ„¤μ • κ°’μ„ μ½μ–΄μ¬ μ μλ„λ΅ μ§μ ‘ κµ¬ν„ν• ConfigServiceλ¥Ό μ΄μ©ν–μ§€λ§ μ§μ ‘ μ…λ ¥ν•΄λ†”λ„ λλ‹¤. μ΄λ ‡κ² ν΄λΌμ΄μ–ΈνΈ μ„¤μ •μ΄ λλ‚λ©΄ μ„λΉ„μ¤ μ½”λ“μ—μ„ νμΌμ„ λ³΄λ‚΄μ£Όλ” μ‘μ—…μ„ ν•λ‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// task.service.ts</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ftpService<span class=\"token punctuation\">.</span><span class=\"token function\">upload</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>originPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>destinationPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code <span class=\"token operator\">===</span> <span class=\"token number\">226</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loggerService<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ftp success'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loggerService<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ftp failed'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loggerService<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ftp unknown response'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>μ°μ„  μ „μ†΅ν•  νμΌμ„ μƒμ„±ν•΄μ¤€λ‹¤. μ΄ν›„ <code class=\"language-text\">upload(origin, destination)</code> λ¥Ό μ΄μ©ν•΄μ„ μƒμ„±ν• νμΌμ„ λ³΄λ‚΄μ¤€λ‹¤. nestjs-ftpλ” μ‘λ‹µμΌλ΅ codeμ™€ messageλ¥Ό λ³΄λ‚΄μ£Όλ”λ° μ§μ ‘ ν™•μΈ ν•΄λ³΄λ‹ 226μ΄ μ¤λ©΄ μ „μ†΅ μ„±κ³µ, 0μ΄ μ¤λ©΄ μ „μ†΅ μ‹¤ν¨μ€λ‹¤. λ‹¤λ¥Έ μ½”λ“κ°€ μ¤λ” κ²½μ°λ¥Ό λ€λΉ„ν•΄μ„ μμ™Έ μ²λ¦¬λ¥Ό ν•λ² λ” ν•΄μ¤¬λ‹¤.</p>\n<p>ν΄λΌμ΄μ–ΈνΈ μ„¤μ •(μ—°κ²°)λ§ μ λ€λ΅ λλ©΄ ν° λ¬Έμ  μ—†μ΄ FTPλ¥Ό ν†µν•΄μ„ νμΌμ„ μ „μ†΅ν•  μ μλ‹¤.</p>\n<h2 id=\"ftp-server-esl-gateway\" style=\"position:relative;\"><a href=\"#ftp-server-esl-gateway\" aria-label=\"ftp server esl gateway permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP Server (ESL Gateway)</h2>\n<p>ESL Gatewayλ” λ‚΄κ°€ μ§μ ‘ λ§λ“  μ„λ²„λ” μ•„λ‹κ³  FTP ν¬νΈ μ„¤μ •μ΄ λμ–΄μλ” μƒνƒλ΅ λ°›μ€ κ²μ΄νΈμ›¨μ΄μ΄λ‹¤. λ‹¤λ§, μ™Έλ¶€μ—μ„ μ ‘μ†ν•κΈ° λ•λ¬Έμ— κ³µμ κΈ° ν¬νΈ ν¬μ›λ”© μ„¤μ •μ„ ν•΄μ¤¬λ‹¤.</p>\n<p>λ‚΄κ°€ μ‚¬μ© μ¤‘μΈ κ³µμ κΈ°λ” ipTIME μ΄κ³ , ν¬νΈ ν¬μ›λ”© μ„¤μ •μ€ λ‹¤λ¥Έ κ³µμ κΈ°λ“¤λ„ λΉ„μ·ν• κ±°λΌκ³  μƒκ°ν•λ‹¤.</p>\n<p><code class=\"language-text\">ipTime κ΄€λ¦¬λ„κµ¬ -> κ³ κΈ‰ μ„¤μ • -> NAT/λΌμ°ν„° κ΄€λ¦¬ -> ν¬νΈν¬μ›λ“ μ„¤μ •</code> μμΌλ΅ λ“¤μ–΄κ°€μ¤€λ‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 647px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAArUlEQVQY0z2PWQ6AIBBDuf+tvIKKKEQl7guo4QI1nUQ/3sdsbUfN8wyyLAvO88R93z/jOCKEgJSScF0X9n1H3/domkZm3DuOA13X4XkeqLquURSFHK/rKgcU37ZNesYYWGtFgDOack4+QYplWQZnHRSLtm1FjHCJCUiMEcMwSN85JwZMw5pCTExYc58migdVVQlsaq1RlqW45nn+pyMxRDGhCD/w3mOaJvDLL9gLWP8k94Da6E8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ftp\"\n        title=\"ftp\"\n        src=\"/static/5ba07787602dbcc2cfdaaee86b2f57dd/ca12d/3.png\"\n        srcset=\"/static/5ba07787602dbcc2cfdaaee86b2f57dd/5a46d/3.png 300w,\n/static/5ba07787602dbcc2cfdaaee86b2f57dd/0a47e/3.png 600w,\n/static/5ba07787602dbcc2cfdaaee86b2f57dd/ca12d/3.png 647w\"\n        sizes=\"(max-width: 647px) 100vw, 647px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>μ΄ν›„ <strong>μƒκ·μΉ™ μ¶”κ°€</strong>λ¥Ό ν†µν•΄μ„ μ™Έλ¶€ ν¬νΈλ¥Ό μ„¤μ •ν•κ³  FTP Serverμ— ν•΄λ‹Ήν•λ” λ‚΄λ¶€ IPμ£Όμ†μ™€ λ‚΄λ¶€ ν¬νΈλ¥Ό μ„¤μ •ν•΄μ£Όλ©΄ λλ‹¤.</p>\n<h2 id=\"ftp-serverκ°€-λΉ„μ •κ·-ν¬νΈλ¥Ό-μ‚¬μ©ν•λ”-κ²½μ°\" style=\"position:relative;\"><a href=\"#ftp-server%EA%B0%80-%EB%B9%84%EC%A0%95%EA%B7%9C-%ED%8F%AC%ED%8A%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"ftp serverκ°€ λΉ„μ •κ· ν¬νΈλ¥Ό μ‚¬μ©ν•λ” κ²½μ° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP Serverκ°€ λΉ„μ •κ· ν¬νΈλ¥Ό μ‚¬μ©ν•λ” κ²½μ°</h2>\n<p>μΌλ°μ μΌλ΅ μ„ κ³Όμ •κΉμ§€ λ§λ¬΄λ¦¬ν•λ©΄ μ ‘μ†κ³Ό νμΌ μ†΅μμ‹ μ΄ μ›ν™ν•κ² μ΄λ£¨μ–΄μ§„λ‹¤. λ‹¤λ§, λ‚΄κ°€ ESL Gatewayλ¥Ό λ°›μ•μ„ λ• FTP ν¬νΈ μ„¤μ •μ΄ 21λ² μ •κ· ν¬νΈκ°€ μ•„λ‹λΌ λ‹¤λ¥Έ ν¬νΈλ¥Ό μ‚¬μ©ν•λ” λΉ„μ •κ· ν¬νΈλ΅ λμ–΄μμ—λ‹¤.</p>\n<p>μ„μ—μ„ μ„¤λ…ν• κ²ƒμ²λΌ FTP ν†µμ‹  μ‹μ— 21λ² ν¬νΈλ” <strong>Command</strong> ν¬νΈμ΄κ³ , 20λ² ν¬νΈλ” <strong>Data</strong> ν¬νΈμ΄λ‹¤. μ •ν•΄μ§„ κ·μ•½μ΄κΈ° λ•λ¬Έμ— μΌλ°μ μΌλ΅ κ³µμ κΈ°λ‚ λ°©ν™”λ²½μ—μ„ 21λ² ν¬νΈλ¥Ό μ—΄λ©΄ 20λ² ν¬νΈλ„ κ°™μ΄ μ—΄λ¦¬κ² λλ‹¤.</p>\n<p>ν•μ§€λ§ λΉ„μ •κ· ν¬νΈλ¥Ό μ‚¬μ©ν•λ” κ²½μ°μ—λ” <code class=\"language-text\">FTP μ—°κ²°μ΄ λμ–΄λ„ λ””λ ‰ν† λ¦¬μ™€ νμΌ λ©λ΅μ΄ λ³΄μ΄μ§€ μ•κ±°λ‚ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  μ μ—†λ‹¤.</code> μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„ κ³µμ κΈ°μ—μ„ μ¶”κ°€ μ‘μ—…μ„ ν•΄μ¤μ•Όν•λ‹¤.</p>\n<p><code class=\"language-text\">ipTime κ΄€λ¦¬λ„κµ¬ -> κ³ κΈ‰ μ„¤μ • -> NAT/λΌμ°ν„° κ΄€λ¦¬ -> κ³ κΈ‰ NAT μ„¤μ • -> FTP λΉ„μ •κ· ν¬νΈ</code> μμΌλ΅ λ“¤μ–΄κ°€μ¤€λ‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 548px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAeklEQVQI142NSQpEIQxEvf/ZBFFwIaK0CN95uEE1Eb70shdFKkPlsRgjhBDgnCN8AvbemHNijHFE/h/13k9l3ntYa++AntRaYYyBc+4AaEd6Ib+iTCkFSimklMBCCNBa43kerLXu0QtqrV1Iq+305AmQcz4Z6qWU58cXzAbe1BynYJcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ftp\"\n        title=\"ftp\"\n        src=\"/static/75aa8f125aba50dcc7e8556db6d0f523/a58fe/4.png\"\n        srcset=\"/static/75aa8f125aba50dcc7e8556db6d0f523/5a46d/4.png 300w,\n/static/75aa8f125aba50dcc7e8556db6d0f523/a58fe/4.png 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>μ΄ν›„ μ΄λ―Έμ§€μ²λΌ μ‚¬μ©ν•κΈ°λ¥Ό μ›ν•λ” λΉ„μ •κ· ν¬νΈλ¥Ό μ¶”κ°€ν•΄μ£Όλ©΄ μ •μƒμ μΌλ΅ μ‚¬μ©μ΄ κ°€λ¥ν•λ‹¤.</p>","tableOfContents":"<ul>\n<li><a href=\"/article/using-ftp-in-nodejs/#ftp-%EB%9E%80\">FTP λ€?</a></li>\n<li><a href=\"/article/using-ftp-in-nodejs/#ftp-client-nestjs\">FTP Client (NestJS)</a></li>\n<li><a href=\"/article/using-ftp-in-nodejs/#ftp-server-esl-gateway\">FTP Server (ESL Gateway)</a></li>\n<li><a href=\"/article/using-ftp-in-nodejs/#ftp-server%EA%B0%80-%EB%B9%84%EC%A0%95%EA%B7%9C-%ED%8F%AC%ED%8A%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\">FTP Serverκ°€ λΉ„μ •κ· ν¬νΈλ¥Ό μ‚¬μ©ν•λ” κ²½μ°</a></li>\n</ul>","frontmatter":{"title":"NestJSμ—μ„ FTP μ‚¬μ©ν•κΈ° π“¦"}}},"pageContext":{"slug":"/article/using-ftp-in-nodejs/","previous":{"fields":{"slug":"/article/running-service-with-pm2/"},"frontmatter":{"title":"PM2λ΅ μ„λΉ„μ¤ μ΄μν•κΈ° π™"}},"next":null}}}